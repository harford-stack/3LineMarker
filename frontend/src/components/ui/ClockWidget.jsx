// frontend/src/components/ui/ClockWidget.jsx
/**
 * ============================================
 * ğŸ• ClockWidget.jsx - ì‹œê³„ ìœ„ì ¯ ì»´í¬ë„ŒíŠ¸
 * ============================================
 * 
 * ì´ íŒŒì¼ì€ í˜„ì¬ ì‹œê°„ê³¼ ë‚ ì§œë¥¼ í‘œì‹œí•˜ëŠ” ì‹œê³„ ìœ„ì ¯ì…ë‹ˆë‹¤.
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * 1. í˜„ì¬ ì‹œê°„ í‘œì‹œ (ì‹œ:ë¶„:ì´ˆ)
 * 2. í˜„ì¬ ë‚ ì§œ í‘œì‹œ (ë…„ ì›” ì¼ ìš”ì¼)
 * 3. 1ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
 * 
 * ì‘ë™ ì›ë¦¬:
 * - setIntervalì„ ì‚¬ìš©í•´ì„œ 1ì´ˆë§ˆë‹¤ ì‹œê°„ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤
 * - ë¸Œë¼ìš°ì €ì˜ í˜„ì¬ ì‹œê°„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤
 */

// ===== 1ë‹¨ê³„: í•„ìš”í•œ ë„êµ¬ë“¤ ê°€ì ¸ì˜¤ê¸° =====
// Reactì˜ ê¸°ë³¸ ê¸°ëŠ¥ë“¤
import React, { useState, useEffect } from 'react';

// Material-UI ì»´í¬ë„ŒíŠ¸ë“¤
import Box from '@mui/material/Box';
import Typography from '@mui/material/Typography';
import Paper from '@mui/material/Paper';

// ê³µí†µ ìŠ¤íƒ€ì¼
import { retroPaperSmall, monoText, COLORS } from '../../styles/commonStyles';

// ===== 2ë‹¨ê³„: ClockWidget ì»´í¬ë„ŒíŠ¸ ì •ì˜ =====
/**
 * ClockWidget í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
 * 
 * í˜„ì¬ ì‹œê°„ê³¼ ë‚ ì§œë¥¼ í‘œì‹œí•˜ëŠ” ì‹œê³„ ìœ„ì ¯ì…ë‹ˆë‹¤.
 * 
 * props:
 * - ì—†ìŒ (í•­ìƒ í˜„ì¬ ì‹œê°„ì„ í‘œì‹œ)
 */
function ClockWidget() {
  // ===== ìƒíƒœ ê´€ë¦¬ (useState) =====
  
  // time: í˜„ì¬ ì‹œê°„
  // new Date(): í˜„ì¬ ë‚ ì§œ/ì‹œê°„ ê°ì²´ ìƒì„±
  const [time, setTime] = useState(new Date());
  
  // date: í˜„ì¬ ë‚ ì§œ
  // new Date(): í˜„ì¬ ë‚ ì§œ/ì‹œê°„ ê°ì²´ ìƒì„±
  const [date, setDate] = useState(new Date());

  // ===== useEffect: ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰ =====
  /**
   * 1ì´ˆë§ˆë‹¤ ì‹œê°„ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
   * 
   * ì‘ë™:
   * 1. setIntervalë¡œ 1ì´ˆë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” íƒ€ì´ë¨¸ ìƒì„±
   * 2. ë§¤ì´ˆë§ˆë‹¤ í˜„ì¬ ì‹œê°„ì„ ê°€ì ¸ì™€ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸
   * 3. ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ íƒ€ì´ë¨¸ ì œê±°
   */
  useEffect(() => {
    /**
     * setInterval: ì¼ì • ì‹œê°„ë§ˆë‹¤ í•¨ìˆ˜ ì‹¤í–‰
     * 
     * 1000 = 1ì´ˆ (ë°€ë¦¬ì´ˆ ë‹¨ìœ„)
     * 
     * ë§¤ì´ˆë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜:
     * 1. new Date()ë¡œ í˜„ì¬ ì‹œê°„ ê°€ì ¸ì˜¤ê¸°
     * 2. timeê³¼ date ìƒíƒœ ì—…ë°ì´íŠ¸
     */
    const timer = setInterval(() => {
      const now = new Date();  // í˜„ì¬ ì‹œê°„ ê°€ì ¸ì˜¤ê¸°
      setTime(now);            // ì‹œê°„ ì—…ë°ì´íŠ¸
      setDate(now);            // ë‚ ì§œ ì—…ë°ì´íŠ¸
    }, 1000); // 1ì´ˆë§ˆë‹¤ ì‹¤í–‰

    /**
     * cleanup í•¨ìˆ˜: ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ ì‹¤í–‰
     * 
     * clearInterval: íƒ€ì´ë¨¸ ì œê±°
     * 
     * ì™œ í•„ìš”í•œê°€?
     * - ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì ¸ë„ íƒ€ì´ë¨¸ê°€ ê³„ì† ì‹¤í–‰ë˜ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí•©ë‹ˆë‹¤
     * - cleanup í•¨ìˆ˜ì—ì„œ íƒ€ì´ë¨¸ë¥¼ ì œê±°í•´ì„œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤
     */
    return () => clearInterval(timer);
  }, []); // ì˜ì¡´ì„± ì—†ìŒ (ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ í•œ ë²ˆë§Œ ì‹¤í–‰)

  // ===== í•¨ìˆ˜ ì •ì˜ =====
  
  /**
   * formatTime í•¨ìˆ˜
   * 
   * ë‚ ì§œ ê°ì²´ë¥¼ ì‹œê°„ ë¬¸ìì—´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
   * 
   * ë§¤ê°œë³€ìˆ˜:
   * - date: ë‚ ì§œ ê°ì²´
   * 
   * ë°˜í™˜ê°’:
   * - ì‹œê°„ ë¬¸ìì—´ (ì˜ˆ: "14:30:25")
   * 
   * toLocaleTimeString ì„¤ëª…:
   * - ë‚ ì§œ ê°ì²´ë¥¼ ë¡œì»¬ ì‹œê°„ í˜•ì‹ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜
   * - 'ko-KR': í•œêµ­ì–´ í˜•ì‹
   * - hour: '2-digit': ì‹œê°„ì„ 2ìë¦¬ ìˆ«ìë¡œ (ì˜ˆ: "14")
   * - minute: '2-digit': ë¶„ì„ 2ìë¦¬ ìˆ«ìë¡œ (ì˜ˆ: "30")
   * - second: '2-digit': ì´ˆë¥¼ 2ìë¦¬ ìˆ«ìë¡œ (ì˜ˆ: "25")
   * - hour12: false: 24ì‹œê°„ í˜•ì‹ ì‚¬ìš© (ì˜¤í›„ 2ì‹œ â†’ 14ì‹œ)
   */
  const formatTime = (date) => {
    return date.toLocaleTimeString('ko-KR', {
      hour: '2-digit',      // ì‹œê°„: 2ìë¦¬ ìˆ«ì
      minute: '2-digit',    // ë¶„: 2ìë¦¬ ìˆ«ì
      second: '2-digit',     // ì´ˆ: 2ìë¦¬ ìˆ«ì
      hour12: false,        // 24ì‹œê°„ í˜•ì‹
    });
  };

  /**
   * formatDate í•¨ìˆ˜
   * 
   * ë‚ ì§œ ê°ì²´ë¥¼ ë‚ ì§œ ë¬¸ìì—´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
   * 
   * ë§¤ê°œë³€ìˆ˜:
   * - date: ë‚ ì§œ ê°ì²´
   * 
   * ë°˜í™˜ê°’:
   * - ë‚ ì§œ ë¬¸ìì—´ (ì˜ˆ: "2025ë…„ 1ì›” 15ì¼ (ìˆ˜)")
   * 
   * toLocaleDateString ì„¤ëª…:
   * - ë‚ ì§œ ê°ì²´ë¥¼ ë¡œì»¬ ë‚ ì§œ í˜•ì‹ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜
   * - 'ko-KR': í•œêµ­ì–´ í˜•ì‹
   * - year: 'numeric': ì—°ë„ë¥¼ ìˆ«ìë¡œ (ì˜ˆ: "2025")
   * - month: 'long': ì›”ì„ ê¸´ í˜•ì‹ìœ¼ë¡œ (ì˜ˆ: "1ì›”")
   * - day: 'numeric': ì¼ì„ ìˆ«ìë¡œ (ì˜ˆ: "15")
   * - weekday: 'short': ìš”ì¼ì„ ì§§ì€ í˜•ì‹ìœ¼ë¡œ (ì˜ˆ: "ìˆ˜")
   */
  const formatDate = (date) => {
    return date.toLocaleDateString('ko-KR', {
      year: 'numeric',      // ì—°ë„: ìˆ«ì
      month: 'long',        // ì›”: ê¸´ í˜•ì‹ (1ì›”, 2ì›” ë“±)
      day: 'numeric',       // ì¼: ìˆ«ì
      weekday: 'short',     // ìš”ì¼: ì§§ì€ í˜•ì‹ (ì›”, í™”, ìˆ˜ ë“±)
    });
  };

  // ===== í™”ë©´ì— ê·¸ë¦¬ê¸° (JSX ë°˜í™˜) =====
  return (
    <Paper
      sx={{
        ...retroPaperSmall,              // ê³µí†µ ìŠ¤íƒ€ì¼ ì ìš©
        borderColor: COLORS.neonCyan,    // ì²­ë¡ìƒ‰ í…Œë‘ë¦¬
        px: 2,                           // ê°€ë¡œ íŒ¨ë”©
        py: 1.5,                         // ì„¸ë¡œ íŒ¨ë”©
        minWidth: 200,                   // ìµœì†Œ ë„ˆë¹„
      }}
    >
      <Box sx={{ textAlign: 'center' }}>
        {/* ì‹œê°„ í‘œì‹œ */}
        <Typography
          variant="h5"
          sx={{
            ...monoText,                 // ê³µí†µ ìŠ¤íƒ€ì¼ ì ìš©
            color: COLORS.neonCyan,      // ì²­ë¡ìƒ‰ ê¸€ì
            fontSize: '1.5rem',
            fontFamily: '"Press Start 2P", "Galmuri11", cursive', // ë ˆíŠ¸ë¡œ í°íŠ¸
            textShadow: `0 0 10px ${COLORS.neonCyan}`, // ë„¤ì˜¨ íš¨ê³¼
            mb: 0.5,                     // ì•„ë˜ ì—¬ë°±
          }}
        >
          {formatTime(time)}  {/* ì‹œê°„ í‘œì‹œ (ì˜ˆ: "14:30:25") */}
        </Typography>
        {/* ë‚ ì§œ í‘œì‹œ */}
        <Typography
          variant="caption"
          sx={{
            ...monoText,
            color: '#888',               // íšŒìƒ‰ ê¸€ì
            fontSize: '0.9rem',
            fontFamily: '"VT323", "DungGeunMo", monospace',
          }}
        >
          {formatDate(date)}  {/* ë‚ ì§œ í‘œì‹œ (ì˜ˆ: "2025ë…„ 1ì›” 15ì¼ (ìˆ˜)") */}
        </Typography>
      </Box>
    </Paper>
  );
}

// ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‚´ë³´ë‚´ê¸°
export default ClockWidget;
