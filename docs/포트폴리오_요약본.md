# 3LineMarker - 포트폴리오 요약본

## 📌 프로젝트 개요

**프로젝트명**: 3LineMarker  
**개발 기간**: 2025년 11월 25일 ~ 12월 02일 (8일)  
**프로젝트 유형**: 개인 프로젝트  
**주제**: React 활용 SNS 사이트 구현

---

## 🎯 프로젝트 소개

3LineMarker는 **지도 기반 소셜 네트워크 서비스(SNS)**입니다. 사용자는 지도에 마커를 생성하고, 다른 사용자들과 소통하며, 실시간으로 채팅할 수 있습니다. 레트로 게임 테마의 UI/UX로 독특한 사용자 경험을 제공합니다.

---

## 💡 핵심 기능

### 1. 지도 기반 마커 시스템
- **Leaflet 지도**를 활용한 인터랙티브 지도
- 지도 클릭으로 마커 생성
- 마커 CRUD (생성, 조회, 수정, 삭제)
- 카테고리별 필터링 (음식점, 카페, 관광지, 쇼핑, 기타)
- 마커 클러스터링
- 이미지 업로드 및 미리보기

### 2. 사용자 인증 및 프로필
- JWT 토큰 기반 인증
- 회원가입 (아이디 중복 체크)
- 로그인/로그아웃
- 프로필 수정 (닉네임, 상태 메시지, 프로필 이미지)
- 팔로우/언팔로우 시스템
- 팔로워/팔로잉 목록

### 3. 소셜 기능
- 좋아요/좋아요 취소
- 댓글 작성/삭제 (무한 스크롤)
- 북마크 추가/제거
- 피드 (팔로잉 피드, 탐색 피드)
- 검색 (마커 검색, 사용자 검색)

### 4. 실시간 채팅
- **WebSocket (Socket.io)** 기반 실시간 채팅
- 일대일 채팅
- 실시간 메시지 전송/수신
- 채팅방 목록
- 메시지 읽음 처리
- 채팅 알림

### 5. 알림 시스템
- 좋아요, 댓글, 팔로우, 채팅 알림
- 실시간 알림 업데이트 (30초 간격 폴링)
- 알림 배지 표시

### 6. 지도 위젯
- 시계 위젯
- 날씨 위젯 (OpenWeatherMap API 연동)
- 나침반 위젯 (지도 방향 표시)
- 레이더 위젯 (주변 마커 표시)

---

## 🛠 기술 스택

### Frontend
- **React 19.2.0** - UI 라이브러리
- **Material-UI 7.3.5** - UI 컴포넌트
- **Redux Toolkit 2.11.0** - 전역 상태 관리
- **React Router 7.9.6** - 페이지 라우팅
- **Leaflet 1.9.4** - 지도 라이브러리
- **React-Leaflet 5.0.0** - React용 Leaflet 래퍼
- **Socket.io-client 4.8.1** - WebSocket 클라이언트

### Backend
- **Node.js** - 서버 런타임
- **Express 5.1.0** - 웹 프레임워크
- **MySQL 3.15.3** - 데이터베이스
- **Socket.io 4.8.1** - WebSocket 서버
- **JWT 9.0.2** - 인증 토큰
- **bcrypt 6.0.0** - 비밀번호 해싱
- **Multer 2.0.2** - 파일 업로드

---

## 🎨 UI/UX 특징

### 레트로 테마
- 네온 색상 (녹색, 청록색, 마젠타)
- 픽셀 폰트 (Press Start 2P, VT323, DungGeunMo)
- 레트로 다이얼로그
- 별 배경 애니메이션

### 반응형 디자인
- 모바일, 태블릿, 데스크톱 지원
- CSS Grid 및 Flexbox 활용

---

## 📊 주요 성과

### 기능 완성도
- ✅ 핵심 기능 100% 구현
- ✅ 실시간 채팅 시스템 구축
- ✅ 알림 시스템 구현
- ✅ 지도 위젯 통합

### 코드 품질
- ✅ ESLint 경고 0개
- ✅ React Hook 최적화 (useCallback, useMemo)
- ✅ 코드 주석 및 문서화

### 성능 최적화
- ✅ 불필요한 리렌더링 방지
- ✅ 무한 스크롤 최적화
- ✅ 이미지 최적화

---

## 🔧 기술적 도전과 해결

### 1. 실시간 채팅 구현
- **도전**: WebSocket을 활용한 실시간 통신
- **해결**: Socket.io 서버/클라이언트 통합, 재연결 로직 구현

### 2. 지도 마커 클러스터링
- **도전**: 많은 마커의 성능 최적화
- **해결**: react-leaflet-cluster 라이브러리 활용

### 3. React Hook 최적화
- **도전**: 무한 루프 및 성능 문제
- **해결**: useCallback, useMemo, useRef 적절한 활용

### 4. 이미지 업로드 및 관리
- **도전**: 이미지 경로 관리 및 최적화
- **해결**: Multer 미들웨어, 절대 경로 변환

---

## 🔍 트러블 슈팅

### 1. 무한 스크롤 성능 문제

#### 1. 문제상황
- 피드 페이지에서 무한 스크롤 구현 시 과도한 리렌더링 발생
- 스크롤 시 화면이 끊기고 버벅이는 현상
- 메모리 사용량이 지속적으로 증가하여 브라우저 성능 저하

#### 2. 원인
- `loadFeed` 함수가 매 렌더링마다 재생성되어 `useEffect`가 계속 실행됨
- Intersection Observer 콜백 함수가 메모이제이션되지 않아 불필요한 리렌더링 발생
- 페이지네이션 로직에서 계산된 값들이 매번 재계산됨

#### 3. 해결방안
- `useCallback`을 활용하여 `loadFeed` 함수 메모이제이션
- `useMemo`로 계산 비용이 큰 값들 메모이제이션
- 페이지 크기를 10개씩으로 조정하여 한 번에 로드하는 데이터 양 제한
- Intersection Observer 콜백 함수도 `useCallback`으로 메모이제이션

```javascript
const loadFeed = useCallback(async (pageNum, reset = false) => {
    if (loading) return;
    setLoading(true);
    try {
        const data = await getFeed(token, pageNum, 10);
        if (reset) {
            setMarkers(data.markers);
        } else {
            setMarkers(prev => [...prev, ...data.markers]);
        }
        setHasMore(data.markers.length >= 10);
    } catch (error) {
        console.error('피드 로드 실패:', error);
    } finally {
        setLoading(false);
    }
}, [token, tab, sort, isAuthenticated]);
```

#### 4. 개선결과
- 리렌더링 횟수 약 70% 감소
- 스크롤 성능이 부드럽게 개선되어 사용자 경험 향상
- 메모리 사용량 안정화
- 페이지 로딩 속도 개선

---

### 2. React Hook 의존성 배열 문제

#### 1. 문제상황
- `useCallback`의 의존성 배열에 `page` 상태가 포함되어 있어 `page`가 변경될 때마다 함수가 재생성됨
- `useEffect`에서 메모이제이션된 함수를 호출하면 무한 루프 발생
- ESLint에서 의존성 배열 경고 다수 발생

#### 2. 원인
- `page` 상태가 변경될 때마다 `loadFeed` 함수가 재생성됨
- 재생성된 함수를 `useEffect`의 의존성으로 사용하면 다시 실행되어 `page`가 변경되고, 이로 인해 무한 루프 발생
- React Hook의 의존성 배열 규칙을 제대로 이해하지 못한 상태에서 구현

#### 3. 해결방안
- `useRef`를 활용하여 `page` 값을 ref로 관리
- 의존성 배열에서 `page`를 제거하고 함수 내부에서 `pageRef.current`로 최신 값 참조
- `useEffect`를 통해 `page`가 변경될 때마다 `pageRef.current` 업데이트

```javascript
const pageRef = useRef(page);

useEffect(() => {
    pageRef.current = page;
}, [page]);

const loadFeed = useCallback(async (pageNum, reset = false) => {
    const currentPage = pageNum || pageRef.current;
    // ... 로직
}, [token, tab, sort, isAuthenticated]);
```

#### 4. 개선결과
- 무한 루프 문제 완전 해결
- ESLint 경고 0개 달성
- 함수 재생성 횟수 감소로 성능 개선
- 코드 안정성 및 유지보수성 향상

---

## 📈 프로젝트 통계

- **개발 기간**: 8일
- **코드 라인 수**: 약 15,000+ 줄
- **페이지 수**: 9개
- **API 엔드포인트**: 40+ 개
- **데이터베이스 테이블**: 10+ 개

---

## 🎓 배운 점

1. **React Hooks 활용**
   - useCallback, useMemo, useRef의 적절한 활용
   - 의존성 배열 관리의 중요성

2. **상태 관리**
   - Redux Toolkit을 통한 전역 상태 관리
   - 로컬 상태와 전역 상태의 구분

3. **실시간 통신**
   - WebSocket을 활용한 실시간 기능 구현
   - Socket.io의 이벤트 기반 아키텍처 이해

4. **성능 최적화**
   - 불필요한 리렌더링 방지
   - 메모이제이션 전략

5. **코드 품질**
   - ESLint를 통한 코드 품질 관리
   - 주석을 통한 코드 문서화

---

## 🚀 향후 개선 사항

1. **기능 추가**
   - 그룹 채팅 기능
   - 마커 공유 기능
   - 다국어 지원

2. **성능 개선**
   - 이미지 압축 및 최적화
   - 서버 사이드 렌더링 (SSR) 고려

3. **테스트**
   - 단위 테스트 작성
   - 통합 테스트 작성

4. **배포**
   - AWS/Heroku 배포
   - CI/CD 파이프라인 구축

---

## 📸 추천 스크린샷

포트폴리오용으로 다음 페이지들을 캡처하는 것을 추천합니다:

1. **지도 페이지 (메인)** - 지도와 마커, 위젯들이 보이는 화면
2. **피드 페이지** - 마커 카드들이 표시된 화면
3. **프로필 페이지** - 프로필 정보와 마커 그리드
4. **채팅 페이지** - 실시간 채팅 화면
5. **로그인/회원가입 페이지** - 레트로 테마 UI

---

## 💼 포트폴리오 활용 가이드

### 프로젝트 설명 시 강조할 점
1. **실시간 채팅 시스템**: WebSocket을 활용한 실시간 통신 구현
2. **지도 기반 마커 시스템**: Leaflet을 활용한 인터랙티브 지도 구현
3. **레트로 테마 UI/UX**: 독특한 디자인과 사용자 경험
4. **성능 최적화**: React Hook 최적화 및 불필요한 리렌더링 방지
5. **코드 품질**: ESLint 경고 0개, 주석 및 문서화

### 기술 스택 설명
- **Frontend**: React, Material-UI, Redux Toolkit, React Router, Leaflet
- **Backend**: Node.js, Express, MySQL, Socket.io, JWT
- **실시간 통신**: WebSocket (Socket.io)
- **상태 관리**: Redux Toolkit
- **지도**: Leaflet

### 프로젝트 기여도
- **개인 프로젝트**: 100% 개인 개발
- **기간**: 8일 (2025년 11월 25일 ~ 12월 02일)
- **완성도**: 핵심 기능 100% 구현

---

**작성일**: 2025년 12월 2일

